---
export type ButtonVariant = 'primary' | 'secondary' | 'ghost';
export type ButtonSize = 'sm' | 'md' | 'lg';

export interface Props {
  href?: string;
  target?: string;
  rel?: string;
  variant?: ButtonVariant;
  size?: ButtonSize;
  class?: string;
}

const {
  href,
  variant = 'primary',
  size = 'md',
  class: className,
  ...rest
} = Astro.props;

const base =
  'relative inline-flex items-center justify-center gap-2 rounded-full font-bold uppercase tracking-wider transition-all duration-300 focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-sonic-gold focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:opacity-50 disabled:pointer-events-none hover:scale-105 active:scale-95 group overflow-hidden';

const variants: Record<ButtonVariant, string> = {
  primary: 'bg-gradient-to-r from-sonic-blue to-blue-600 text-white shadow-lg shadow-blue-500/30 border-b-4 border-blue-800 hover:brightness-110',
  secondary: 'bg-gradient-to-r from-sonic-red to-red-600 text-white shadow-lg shadow-red-500/30 border-b-4 border-red-800 hover:brightness-110',
  ghost: 'bg-white text-sonic-blue border-2 border-sonic-blue/30 hover:bg-blue-50 hover:border-sonic-blue shadow-sm'
};

const sizes: Record<ButtonSize, string> = {
  sm: 'px-4 py-2 text-xs',
  md: 'px-6 py-3 text-sm',
  lg: 'px-8 py-4 text-base'
};

const classes = [base, variants[variant], sizes[size], className].filter(Boolean).join(' ');
---

{
  href ? (
    <a href={href} class={classes} {...rest}>
      <span class="relative z-10 flex items-center gap-2">
        <slot />
      </span>
      {/* Ring Effect on Hover */}
      <span class="absolute inset-0 z-0 bg-sonic-gold opacity-0 transition-opacity duration-300 group-hover:opacity-20"></span>
      <span class="absolute -right-4 -top-4 h-12 w-12 rounded-full border-4 border-white/20 opacity-0 transition-all duration-500 group-hover:right-2 group-hover:top-2 group-hover:opacity-100"></span>
    </a>
  ) : (
    <button class={classes} type="button" {...rest}>
      <span class="relative z-10 flex items-center gap-2">
        <slot />
      </span>
      {/* Ring Effect on Hover */}
      <span class="absolute inset-0 z-0 bg-sonic-gold opacity-0 transition-opacity duration-300 group-hover:opacity-20"></span>
    </button>
  )
}
